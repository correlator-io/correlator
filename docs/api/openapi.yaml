openapi: 3.0.3
info:
  title: Correlator API
  version: 1.0.0
  description: |
    **Correlator Incident Correlation Engine API**
servers:
  - url: http://localhost:8080/api/v1
    description: Local development server
  - url: https://getcorrelator.io/api/v1
    description: Production server

security:
  - ApiKeyAuth: []
  - {} # No authentication for MVP (localhost binding)

paths:
  # OpenLineage Ingestion - Primary plugin integration
  /lineage/events:
    post:
      summary: Ingest OpenLineage events
      description: |
        Primary plugin integration endpoint. Accepts OpenLineage v1.0 compliant RunEvents
        from external plugins (correlator-dbt, correlator-airflow, etc.).

        **Correlation Logic**: Extracts canonical `jobRunId` from RunEvent for linking
        test failures to job runs with >90% accuracy.

        **Performance**: Designed for 1,000 events/second sustained throughput.

        **Batch Processing**: Supports single event or array of events. Returns per-event
        status with 207 Multi-Status for partial success scenarios.

        **Idempotency**: Duplicate events return 200 OK with "duplicate" status.

        **MVP Scope**: Currently supports RunEvent only. DatasetEvent and JobEvent
        support deferred to Phase 2+. NDJSON format deferred to Phase 2.
      operationId: ingestLineageEvents
      tags:
        - OpenLineage Ingestion
      requestBody:
        description: |
          Array of OpenLineage RunEvents. Single events should be sent as arrays of length 1.
          This approach simplifies client implementation and aligns with OpenLineage's batch-oriented design.
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: './schemas/openlineage.yaml#/components/schemas/RunEvent'
              minItems: 1
              maxItems: 1000
              description: Batch of RunEvents (up to 1000 events, ~1MB request limit)
            examples:
              single_event:
                summary: Single event (sent as array with 1 element)
                value:
                  - eventTime: "2024-01-01T12:00:00Z"
                    producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
                    schemaURL: "https://openlineage.io/spec/1-0-0/OpenLineage.json"
                    eventType: "START"
                    run:
                      runId: "dbt:abc123-def456"
                    job:
                      namespace: "dbt"
                      name: "models.users"
                    inputs: []
                    outputs: []
              batch_events:
                summary: Batch of events for single run
                value:
                  - eventTime: "2024-01-01T12:00:00Z"
                    producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
                    schemaURL: "https://openlineage.io/spec/1-0-0/OpenLineage.json"
                    eventType: "START"
                    run:
                      runId: "dbt:abc123-def456"
                    job:
                      namespace: "dbt"
                      name: "models.users"
                  - eventTime: "2024-01-01T12:05:00Z"
                    producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
                    schemaURL: "https://openlineage.io/spec/1-0-0/OpenLineage.json"
                    eventType: "COMPLETE"
                    run:
                      runId: "dbt:abc123-def456"
                    job:
                      namespace: "dbt"
                      name: "models.users"
      responses:
        '200':
          description: All events processed successfully (stored or duplicates)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LineageResponse'
              examples:
                all_stored:
                  summary: All events stored successfully
                  value:
                    correlation_id: "123e4567-e89b-12d3-a456-426614174000"
                    timestamp: "2024-01-01T12:05:30Z"
                    stored: 2
                    duplicates: 0
                    failed: 0
                    results:
                      - index: 0
                        status: 200
                        message: "stored"
                      - index: 1
                        status: 200
                        message: "stored"
                all_duplicates:
                  summary: All events are duplicates (idempotency)
                  value:
                    correlation_id: "234e5678-e89b-12d3-a456-426614174001"
                    timestamp: "2024-01-01T12:05:31Z"
                    stored: 0
                    duplicates: 2
                    failed: 0
                    results:
                      - index: 0
                        status: 200
                        message: "duplicate"
                      - index: 1
                        status: 200
                        message: "duplicate"
        '207':
          description: Partial success - some events stored, some failed validation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LineageResponse'
              example:
                correlation_id: "345e6789-e89b-12d3-a456-426614174002"
                timestamp: "2024-01-01T12:05:32Z"
                stored: 2
                duplicates: 1
                failed: 1
                results:
                  - index: 0
                    status: 200
                    message: "stored"
                  - index: 1
                    status: 200
                    message: "duplicate"
                  - index: 2
                    status: 200
                    message: "stored"
                  - index: 3
                    status: 422
                    error: "missing required field: run.runId"
        '400':
          $ref: '#/components/responses/BadRequest'
        '413':
          $ref: '#/components/responses/PayloadTooLarge'
        '415':
          $ref: '#/components/responses/UnsupportedMediaType'
        '422':
          $ref: '#/components/responses/ValidationError'
        '429':
          $ref: '#/components/responses/RateLimited'
        '500':
          $ref: '#/components/responses/InternalError'

  # Test Results Ingestion
  /test-results:
    post:
      summary: Ingest data quality test results
      description: |
        Ingest test results from data quality tools (Great Expectations, dbt tests, custom validators).

        **Critical for Correlation**: Test results linked to `jobRunId` enable correlation
        of test failures with producing job runs.
      operationId: ingestTestResults
      tags:
        - Test Results
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/TestResult'
                - type: array
                  items:
                    $ref: '#/components/schemas/TestResult'
            examples:
              single_test_failure:
                $ref: '#/components/examples/test_failure'
              bulk_test_results:
                $ref: '#/components/examples/bulk_test_results'
      responses:
        '200':
          description: Test result(s) ingested successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/InternalError'

  # Plugin Management
  /plugins/health:
    get:
      summary: Plugin health check endpoint
      description: |
        Health check endpoint for plugin integration validation. Used by setup wizard
        and continuous monitoring to ensure plugin connectivity.
      operationId: checkPluginHealth
      tags:
        - Plugin Management
      parameters:
        - name: plugin_name
          in: query
          description: Specific plugin to check (e.g., 'correlator-dbt', 'correlator-airflow')
          schema:
            type: string
            enum: [correlator-dbt, correlator-airflow, correlator-ge, custom]
      responses:
        '200':
          description: Plugin health status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginHealthResponse'
        '500':
          $ref: '#/components/responses/InternalError'

  /plugins/discovery:
    get:
      summary: Plugin discovery and registration
      description: Plugin discovery endpoint for automatic plugin detection and registration
      operationId: discoverPlugins
      tags:
        - Plugin Management
      responses:
        '200':
          description: Available plugins
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginDiscoveryResponse'

  # Correlation Queries - For UI and 2-click Navigation
  /incidents:
    get:
      summary: List recent incidents
      description: |
        Retrieve recent incidents for dashboard display. Supports 2-click navigation:
        incident list â†’ incident detail.

        **Performance Target**: <200ms response time for dashboard queries.
      operationId: listIncidents
      tags:
        - Correlation Queries
      parameters:
        - name: limit
          in: query
          description: Maximum number of incidents to return
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of incidents to skip for pagination
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: status
          in: query
          description: Filter by incident status
          schema:
            type: string
            enum: [active, resolved, investigating]
        - name: severity
          in: query
          description: Filter by incident severity
          schema:
            type: string
            enum: [critical, high, medium, low]
        - name: time_range
          in: query
          description: Time range for incidents
          schema:
            type: string
            enum: [1h, 6h, 24h, 7d, 30d]
            default: 24h
      responses:
        '200':
          description: List of incidents
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncidentListResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalError'

  /incidents/{incident_id}:
    get:
      summary: Get incident details
      description: |
        Retrieve detailed incident information for root cause analysis. Second click
        in 2-click navigation workflow.

        **Performance Target**: <1s response time for complex lineage queries.
      operationId: getIncidentDetails
      tags:
        - Correlation Queries
      parameters:
        - name: incident_id
          in: path
          required: true
          description: Unique incident identifier
          schema:
            type: string
            format: uuid
        - name: include_lineage
          in: query
          description: Include upstream/downstream lineage information
          schema:
            type: boolean
            default: true
        - name: lineage_depth
          in: query
          description: Maximum depth for lineage traversal
          schema:
            type: integer
            minimum: 1
            maximum: 10
            default: 3
      responses:
        '200':
          description: Incident details with correlation information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncidentDetailsResponse'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalError'

  /lineage/traverse:
    get:
      summary: Traverse dataset lineage
      description: |
        Traverse dataset lineage for impact analysis. Used by incident detail view
        to show upstream/downstream relationships.
      operationId: traverseLineage
      tags:
        - Correlation Queries
      parameters:
        - name: dataset_urn
          in: query
          required: true
          description: Dataset URN to start traversal from
          schema:
            type: string
            example: "postgres://prod.db/clean.users"
        - name: direction
          in: query
          description: Traversal direction
          schema:
            type: string
            enum: [upstream, downstream, both]
            default: both
        - name: depth
          in: query
          description: Maximum traversal depth
          schema:
            type: integer
            minimum: 1
            maximum: 10
            default: 3
      responses:
        '200':
          description: Lineage traversal results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LineageTraversalResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalError'

  # System Health and Metrics
  /health:
    get:
      summary: System health check
      description: |
        Overall system health for setup validation and monitoring. Used by
        `correlator validate-setup` command and health dashboards.
      operationId: getSystemHealth
      tags:
        - System Health
      responses:
        '200':
          description: System health status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemHealthResponse'
        '503':
          description: System unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemHealthResponse'

  /metrics:
    get:
      summary: Get system metrics
      description: |
        System performance and correlation accuracy metrics. Critical for monitoring
        >90% correlation accuracy target.
      operationId: getSystemMetrics
      tags:
        - System Health
      parameters:
        - name: format
          in: query
          description: Metrics format
          schema:
            type: string
            enum: [json, prometheus]
            default: json
        - name: time_range
          in: query
          description: Time range for metrics
          schema:
            type: string
            enum: [1h, 6h, 24h, 7d]
            default: 1h
      responses:
        '200':
          description: System metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemMetricsResponse'
            text/plain:
              schema:
                type: string
                description: Prometheus-formatted metrics
        '500':
          $ref: '#/components/responses/InternalError'

  /metrics/correlation-accuracy:
    get:
      summary: Get correlation accuracy metrics
      description: |
        Detailed correlation accuracy metrics for validation of >90% accuracy target.
        Used by monitoring systems and business metrics tracking.
      operationId: getCorrelationAccuracy
      tags:
        - System Health
      parameters:
        - name: time_window
          in: query
          description: Time window for accuracy measurement
          schema:
            type: string
            enum: [1h, 6h, 24h, 7d]
            default: 24h
        - name: breakdown_by
          in: query
          description: Break down accuracy by dimension
          schema:
            type: string
            enum: [plugin, job_type, dataset_type]
      responses:
        '200':
          description: Correlation accuracy metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CorrelationAccuracyResponse'

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        API key authentication for production environments. Not required for MVP
        (localhost binding) but available for enterprise upgrade path.

  schemas:
    # OpenLineage Event Schema (reference to external file)
    OpenLineageEvent:
      $ref: './schemas/openlineage.yaml#/components/schemas/OpenLineageEvent'

    # Test Result Schema
    TestResult:
      type: object
      required:
        - test_name
        - dataset_urn
        - job_run_id
        - status
        - executed_at
      properties:
        test_name:
          type: string
          description: Name of the data quality test
          example: "not_null_user_id"
        dataset_urn:
          type: string
          description: Dataset URN being tested
          example: "postgres://prod.db/clean.users"
        job_run_id:
          type: string
          description: Canonical job run ID (correlation key)
          example: "dbt:abc123-def456"
        status:
          type: string
          enum: [passed, failed, error, warning, skipped]
          description: Test execution status
        message:
          type: string
          description: Test result message or error details
          example: "Found 3 null values in user_id column"
        executed_at:
          type: string
          format: date-time
          description: When the test was executed
        metadata:
          type: object
          additionalProperties: true
          description: Additional test metadata
          example:
            assertion_type: "not_null"
            column_name: "user_id"
            row_count: 1000
            failed_rows: 3

    # Correlation Response Schemas (reference to external file)
    IncidentListResponse:
      $ref: './schemas/correlation.yaml#/components/schemas/IncidentListResponse'

    IncidentDetailsResponse:
      $ref: './schemas/correlation.yaml#/components/schemas/IncidentDetailsResponse'

    LineageTraversalResponse:
      $ref: './schemas/correlation.yaml#/components/schemas/LineageTraversalResponse'

    # System Health Schemas
    SystemHealthResponse:
      type: object
      required:
        - status
        - version
        - timestamp
      properties:
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
          description: Overall system health status
        version:
          type: string
          description: API version
          example: "1.0.0"
        timestamp:
          type: string
          format: date-time
          description: Health check timestamp
        setup_time:
          type: string
          description: Time taken for system setup
          example: "23s"
        database:
          type: object
          properties:
            status:
              type: string
              enum: [connected, disconnected, error]
            latency_ms:
              type: number
              description: Database connection latency
        integrations:
          type: object
          additionalProperties:
            type: string
            enum: [ready, error, not_configured]
          description: Plugin integration status
          example:
            dbt: "ready"
            airflow: "ready"
            great_expectations: "not_configured"
        correlation_accuracy:
          type: string
          description: Current correlation accuracy percentage
          example: "94.2%"

    SystemMetricsResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        time_range:
          type: string
          example: "1h"
        metrics:
          type: object
          properties:
            events_processed_total:
              type: object
              additionalProperties:
                type: number
              example:
                openlineage: 1247
                test_results: 342
            correlation_latency_seconds:
              type: object
              additionalProperties:
                type: number
              example:
                p50: 0.234
                p95: 1.2
                p99: 2.8
            incidents_created_total:
              type: object
              additionalProperties:
                type: number
              example:
                critical: 2
                warning: 8
                info: 15
            database_query_duration_seconds:
              type: object
              additionalProperties:
                type: number
              example:
                incident: 0.089
                lineage: 0.156

    CorrelationAccuracyResponse:
      type: object
      properties:
        overall_accuracy:
          type: number
          format: float
          minimum: 0
          maximum: 100
          description: Overall correlation accuracy percentage
          example: 94.2
        time_window:
          type: string
          example: "24h"
        total_incidents:
          type: integer
          description: Total incidents in time window
        successfully_correlated:
          type: integer
          description: Successfully correlated incidents
        breakdown:
          type: object
          additionalProperties:
            type: object
            properties:
              accuracy:
                type: number
                format: float
              incident_count:
                type: integer
          example:
            dbt:
              accuracy: 96.8
              incident_count: 45
            airflow:
              accuracy: 91.3
              incident_count: 23

    # Plugin Management Schemas
    PluginHealthResponse:
      type: object
      properties:
        overall_status:
          type: string
          enum: [healthy, degraded, error]
        plugins:
          type: object
          additionalProperties:
            type: object
            properties:
              status:
                type: string
                enum: [connected, error, not_configured]
              last_event:
                type: string
                format: date-time
              error_message:
                type: string
          example:
            correlator-dbt:
              status: "connected"
              last_event: "2024-01-01T12:00:00Z"
            correlator-airflow:
              status: "error"
              error_message: "Connection timeout"

    PluginDiscoveryResponse:
      type: object
      properties:
        available_plugins:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              version:
                type: string
              status:
                type: string
                enum: [installed, available, error]
              description:
                type: string
              setup_url:
                type: string
                format: uri

    # Response Schemas
    IngestionResponse:
      type: object
      description: |
        Generic ingestion response for non-lineage endpoints (e.g., test results).
        For lineage events, see LineageResponse with per-event granularity.
      properties:
        message:
          type: string
          example: "Events processed successfully"
        events_processed:
          type: integer
          example: 1
        correlation_id:
          type: string
          format: uuid
          description: Correlation ID for tracking
        processing_time_ms:
          type: number
          example: 45.7

    # Lineage-specific Response Schemas
    LineageResponse:
      type: object
      required:
        - correlation_id
        - timestamp
        - stored
        - duplicates
        - failed
        - results
      description: |
        Response from OpenLineage event ingestion with per-event status.
        Provides granular feedback for batch processing and debugging.
      properties:
        correlation_id:
          type: string
          format: uuid
          description: Request correlation ID for tracking
          example: "123e4567-e89b-12d3-a456-426614174000"
        timestamp:
          type: string
          format: date-time
          description: Response timestamp in ISO 8601 format
          example: "2024-01-01T12:05:30Z"
        stored:
          type: integer
          minimum: 0
          description: Number of events successfully stored
          example: 2
        duplicates:
          type: integer
          minimum: 0
          description: Number of duplicate events (idempotency)
          example: 0
        failed:
          type: integer
          minimum: 0
          description: Number of events that failed validation or storage
          example: 0
        results:
          type: array
          description: Per-event processing results
          items:
            $ref: '#/components/schemas/EventResult'

    EventResult:
      type: object
      required:
        - index
        - status
      description: Processing result for a single event in a batch
      properties:
        index:
          type: integer
          minimum: 0
          description: Zero-based index of the event in the request array
          example: 0
        status:
          type: integer
          description: HTTP status code for this specific event (200 or 422)
          enum: [200, 422]
          example: 200
        message:
          type: string
          description: Success message ("stored" or "duplicate")
          enum: ["stored", "duplicate"]
          example: "stored"
        error:
          type: string
          description: Error message if validation or storage failed
          example: "missing required field: run.runId"

    # Error Response Schemas (reference to external file)
    Error:
      $ref: './schemas/errors.yaml#/components/schemas/Error'

  responses:
    BadRequest:
      description: Bad request - invalid input
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/400"
            title: "Bad Request"
            status: 400
            detail: "Invalid OpenLineage event format"
            instance: "/api/v1/lineage/events"
            correlation_id: "123e4567-e89b-12d3-a456-426614174000"

    ValidationError:
      description: Validation error - request doesn't meet schema requirements
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/422"
            title: "Validation Error"
            status: 422
            detail: "Schema validation failed"
            instance: "/api/v1/lineage/events"
            correlation_id: "123e4567-e89b-12d3-a456-426614174000"

    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/404"
            title: "Not Found"
            status: 404
            detail: "The requested resource was not found"
            instance: "/api/v1/incidents/123e4567-e89b-12d3-a456-426614174000"
            correlation_id: "234e5678-e89b-12d3-a456-426614174001"

    PayloadTooLarge:
      description: Request payload exceeds maximum allowed size (1 MB)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/413"
            title: "Payload Too Large"
            status: 413
            detail: "Request body exceeds maximum size of 1048576 bytes"
            instance: "/api/v1/lineage/events"
            correlation_id: "345e6789-e89b-12d3-a456-426614174002"

    UnsupportedMediaType:
      description: Content-Type header is not supported
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/415"
            title: "Unsupported Media Type"
            status: 415
            detail: "Content-Type must be application/json"
            instance: "/api/v1/lineage/events"
            correlation_id: "456e7890-e89b-12d3-a456-426614174003"

    RateLimited:
      description: Rate limit exceeded
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/429"
            title: "Rate Limited"
            status: 429
            detail: "Rate limit exceeded"
            instance: "/api/v1/lineage/events"
            correlation_id: "567e8901-e89b-12d3-a456-426614174004"

    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            type: "https://getcorrelator.io/problems/500"
            title: "Internal Server Error"
            status: 500
            detail: "An unexpected error occurred"
            instance: "/api/v1/lineage/events"
            correlation_id: "678e9012-e89b-12d3-a456-426614174005"

  examples:
    dbt_run_start:
      summary: dbt model run start event
      value:
        eventTime: "2024-01-01T12:00:00Z"
        producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
        schemaURL: "https://openlineage.io/spec/1-0-0/OpenLineage.json"
        eventType: "START"
        run:
          runId: "dbt:abc123-def456"
          facets:
            nominalTime:
              _producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
              _schemaURL: "https://openlineage.io/spec/facets/1-0-0/NominalTimeRunFacet.json"
              nominalStartTime: "2024-01-01T12:00:00Z"
        job:
          namespace: "dbt"
          name: "models.users"
          facets:
            sql:
              _producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
              _schemaURL: "https://openlineage.io/spec/facets/1-0-0/SQLJobFacet.json"
              query: "SELECT * FROM raw.users WHERE created_at > CURRENT_DATE - 7"
        inputs:
          - namespace: "postgres"
            name: "prod.raw.users"
            facets:
              schema:
                _producer: "https://github.com/correlator-io/correlator-dbt/v1.0.0"
                _schemaURL: "https://openlineage.io/spec/facets/1-0-0/SchemaDatasetFacet.json"
                fields:
                  - name: "user_id"
                    type: "INTEGER"
                  - name: "email"
                    type: "VARCHAR"
        outputs:
          - namespace: "postgres"
            name: "prod.clean.users"

    airflow_task_complete:
      summary: Airflow task completion event
      value:
        eventTime: "2024-01-01T12:05:00Z"
        producer: "https://github.com/correlator-io/correlator-airflow/v1.0.0"
        schemaURL: "https://openlineage.io/spec/1-0-0/OpenLineage.json"
        eventType: "COMPLETE"
        run:
          runId: "airflow:manual__2024-01-01T12:00:00"
          facets:
            processing_engine:
              _producer: "https://github.com/correlator-io/correlator-airflow/v1.0.0"
              _schemaURL: "https://openlineage.io/spec/facets/1-0-0/ProcessingEngineRunFacet.json"
              version: "2.7.0"
              name: "airflow"
        job:
          namespace: "data_pipeline"
          name: "user_etl.extract_users"
        outputs:
          - namespace: "postgres"
            name: "prod.raw.users"

    test_failure:
      summary: Data quality test failure
      value:
        test_name: "not_null_user_id"
        dataset_urn: "postgres://prod.db/clean.users"
        job_run_id: "dbt:abc123-def456"
        status: "failed"
        message: "Found 3 null values in user_id column"
        executed_at: "2024-01-01T12:05:30Z"
        metadata:
          assertion_type: "not_null"
          column_name: "user_id"
          row_count: 1000
          failed_rows: 3

    bulk_test_results:
      summary: Bulk test results submission
      value:
        - test_name: "not_null_user_id"
          dataset_urn: "postgres://prod.db/clean.users"
          job_run_id: "dbt:abc123-def456"
          status: "passed"
          executed_at: "2024-01-01T12:05:30Z"
        - test_name: "unique_email"
          dataset_urn: "postgres://prod.db/clean.users"
          job_run_id: "dbt:abc123-def456"
          status: "failed"
          message: "Found 2 duplicate email addresses"
          executed_at: "2024-01-01T12:05:31Z"

tags:
  - name: OpenLineage Ingestion
    description: Primary plugin integration endpoints for OpenLineage event ingestion
  - name: Test Results
    description: Data quality test result ingestion endpoints
  - name: Plugin Management
    description: Plugin health, discovery, and registration endpoints
  - name: Correlation Queries
    description: Incident and lineage query endpoints for UI and 2-click navigation
  - name: System Health
    description: System health and metrics endpoints for monitoring and validation
